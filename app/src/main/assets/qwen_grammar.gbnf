# Qwen Grammar for Lumina Intent Parsing
# GBNF (Generalized Backus-Naur Form) for constraining LLM output

root ::= intent

intent ::= "{" ws 
    "\"action\"" ws ":" ws action-value ws "," ws
    "\"target\"" ws ":" ws string ws "," ws
    "\"parameters\"" ws ":" ws parameters ws "," ws
    "\"confidence\"" ws ":" ws number ws
"}"

action-value ::= "\"set_render_mode\"" 
    | "\"add_effect\"" 
    | "\"remove_effect\"" 
    | "\"adjust_parameter\"" 
    | "\"capture_frame\"" 
    | "\"start_recording\"" 
    | "\"stop_recording\"" 
    | "\"reset\"" 
    | "\"help\"" 
    | "\"unknown\""

parameters ::= "{" ws (parameter (ws "," ws parameter)*)? ws "}" | string

parameter ::= string ws ":" ws value

value ::= string | number | boolean | "null"

string ::= "\"" ([^"\\] | "\\" .)* "\""

number ::= "-"? ("0" | [1-9] [0-9]*) ("." [0-9]+)? ([eE] [-+]? [0-9]+)?

boolean ::= "true" | "false"

ws ::= [ \t\n\r]*
